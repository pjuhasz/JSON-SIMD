BEGIN { $| = 1; print "1..1000\n"; }

use JSON::SIMD;

our $test = 0;

my $J = JSON::SIMD->new->use_simdjson(0);

# A simplified version of the crash-inducing input string that was
# originally found via fuzzing
my $d = "[0.".("1"x1000).".".("1"x1000).",".((("1"x10).",")x10000)."1";

for my $test (1..1000) {
	eval { $J->decode($d); };
	print "ok $test no crash\n";
}
